<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SPHAERA | Arquitectura Empresarial para la Nueva Era</title>
  <meta name="description" content="SPHAERA diseña Arquitectura Empresarial Inteligente para transformar operaciones manuales en sistemas estratégicos automatizados con IA y gobernanza." />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --primary:#0E2E47;
      --secondary:#3A4BA3;
      --accent:#6B5BFF;
      --growth:#00B3A6;
      --white:#FFFFFF;
      --smoke:#F5F6F8;
      --bg:#070A12;

      --max: 1140px;
      --radius: 18px;
      --bd: rgba(255,255,255,.12);
      --glass: rgba(255,255,255,.06);
      --glass2: rgba(255,255,255,.04);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.72);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Space Grotesk",system-ui,-apple-system,Segoe UI,Roboto,Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 20% 10%, rgba(107,91,255,.25), transparent 60%),
        radial-gradient(1000px 700px at 85% 15%, rgba(0,179,166,.18), transparent 55%),
        linear-gradient(135deg, #070A12, #060818);
      overflow-x:hidden;
    }

    /* pattern overlay */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      opacity:.20;
      background-image:url("assets/images/sphaera-pattern-grid-circuit-2048x2048.png");
      background-size:900px 900px;
      background-repeat:repeat;
      mix-blend-mode:screen;
      filter:contrast(1.05) saturate(1.1);
    }

    a{color:inherit}
    .wrap{max-width:var(--max); margin:0 auto; padding:0 20px;}
    .nav{
      position:sticky; top:0; z-index:50;
      background:rgba(7,10,18,.65);
      backdrop-filter: blur(14px);
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .nav-inner{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 0;
    }
    .brand{
      display:flex; align-items:center; gap:12px;
      letter-spacing:.08em;
      text-transform:uppercase;
      font-weight:700;
      font-size:14px;
    }
    .brand .dot{
      width:10px;height:10px;border-radius:50%;
      background: radial-gradient(circle at 30% 30%, var(--growth), var(--accent));
      box-shadow: 0 0 20px rgba(107,91,255,.55);
    }
    .nav-links{
      display:flex; gap:18px; align-items:center;
      font-size:14px; color:var(--muted);
    }
    .nav-links a{ text-decoration:none; padding:8px 10px; border-radius:999px; }
    .nav-links a:hover{ background:rgba(255,255,255,.06); color:var(--text); }

    .hero{
  position:relative;
  min-height:100vh;
  display:flex;
  align-items:center;
  padding:0 6vw;
  background-image:url("assets/images/sphaera-hero-control-room-1920x1080.png");
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  overflow:hidden;
}

.hero-overlay{
  position:absolute;
  inset:0;
  background:
    linear-gradient(90deg, rgba(6,18,42,.88) 0%, rgba(6,18,42,.65) 45%, rgba(6,18,42,.25) 70%, rgba(6,18,42,.05) 100%);
  backdrop-filter: blur(2px);
}

.hero-content{
  position:relative;
  max-width:700px;
  z-index:2;
}

.hero-badge{
  display:inline-block;
  padding:8px 18px;
  border-radius:30px;
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.15);
  font-size:14px;
  color:rgba(255,255,255,.85);
  margin-bottom:28px;
}

.hero h1{
  font-size: clamp(42px, 4vw, 68px);
  line-height:1.05;
  margin:0 0 28px;
}

.hero p{
  font-size:18px;
  color:rgba(255,255,255,.85);
  margin-bottom:38px;
}

.hero-actions{
  display:flex;
  gap:20px;
  flex-wrap:wrap;
}

.btn-primary{
  padding:14px 26px;
  border-radius:40px;
  background:linear-gradient(135deg,#6B5BFF,#3A4BA3);
  color:white;
  text-decoration:none;
  font-weight:600;
  box-shadow:0 0 40px rgba(107,91,255,.35);
}

.btn-secondary{
  padding:14px 26px;
  border-radius:40px;
  border:1px solid rgba(255,255,255,.25);
  color:white;
  text-decoration:none;
  font-weight:500;
  backdrop-filter:blur(6px);
}

    .kicker{
      display:inline-flex; gap:10px; align-items:center;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.05);
      padding:8px 12px;
      border-radius:999px;
      font-size:13px;
      color:var(--muted);
      margin-bottom:16px;
    }
    .kicker b{ color:var(--text); font-weight:700; }
    h1{
      margin:0 0 14px;
      font-size:52px;
      line-height:1.05;
      letter-spacing:-.03em;
    }
    @media (max-width: 520px){
      h1{ font-size:38px; }
    }
    .lead{
      margin:0 0 22px;
      font-size:18px;
      line-height:1.55;
      color:var(--muted);
      max-width:58ch;
    }

    .cta-row{
      display:flex; gap:12px; flex-wrap:wrap;
      align-items:center;
    }
    .btn{
      border:none; cursor:pointer;
      border-radius:999px;
      padding:12px 18px;
      font-weight:700;
      font-size:14px;
      transition: transform .2s ease, box-shadow .2s ease, background .2s ease;
      display:inline-flex; align-items:center; gap:10px;
      text-decoration:none;
    }
    .btn-primary{
      background:linear-gradient(135deg, var(--accent), #7f78ff);
      color:white;
      box-shadow:0 0 0 1px rgba(255,255,255,.10) inset, 0 18px 45px rgba(107,91,255,.25);
    }
    .btn-primary:hover{ transform: translateY(-2px); box-shadow:0 0 0 1px rgba(255,255,255,.16) inset, 0 22px 60px rgba(107,91,255,.35); }
    .btn-secondary{
      background:rgba(255,255,255,.06);
      border:1px solid rgba(0,179,166,.35);
      color:rgba(219,255,252,.95);
    }
    .btn-secondary:hover{ transform: translateY(-2px); background:rgba(0,179,166,.10); }

    

    /* sections */
    section{ padding:84px 0; position:relative; }
    .section-head{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:20px;
      margin-bottom:22px;
    }
    h2{
      margin:0;
      font-size:34px;
      letter-spacing:-.02em;
    }
    .sub{
      margin:6px 0 0;
      color:var(--muted);
      max-width:70ch;
    }

    .grid{
      display:grid;
      gap:18px;
    }
    .grid-2{ grid-template-columns: repeat(2, minmax(0,1fr)); }
    .grid-3{ grid-template-columns: repeat(3, minmax(0,1fr)); }
    .grid-4{ grid-template-columns: repeat(4, minmax(0,1fr)); }
    @media (max-width: 980px){
      .grid-4{ grid-template-columns: repeat(2, minmax(0,1fr)); }
      .grid-3{ grid-template-columns: repeat(2, minmax(0,1fr)); }
      .grid-2{ grid-template-columns: 1fr; }
    }
    @media (max-width: 560px){
      .grid-3{ grid-template-columns: 1fr; }
      .grid-4{ grid-template-columns: 1fr; }
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.10);
      border-radius: var(--radius);
      padding:18px;
      position:relative;
      overflow:hidden;
      transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
    }
    .card:hover{
      transform: translateY(-4px);
      border-color: rgba(0,179,166,.22);
      box-shadow: 0 22px 60px rgba(0,179,166,.10);
    }
    .card::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(420px 240px at 10% 10%, rgba(0,179,166,.12), transparent 55%),
        radial-gradient(420px 240px at 90% 10%, rgba(107,91,255,.14), transparent 55%);
      pointer-events:none;
    }
    .card p{ margin:10px 0 0; color:var(--muted); }

    /* icon cards */
    .icon-row{ display:flex; align-items:center; gap:12px; }
    .icon{
      width:44px; height:44px; flex:0 0 auto;
      border-radius:14px;
      background: rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.10);
      display:grid; place-items:center;
      overflow:hidden;
    }
    .icon img{ width:34px; height:34px; object-fit:contain; }

    /* scenarios image cards */
    .scenario{
      padding:0;
      overflow:hidden;
    }
    .scenario .thumb{
      width:100%;
      aspect-ratio: 4/3;
      object-fit:cover;
      display:block;
      border-bottom:1px solid rgba(255,255,255,.08);
      filter: saturate(1.05) contrast(1.05);
    }
    .scenario .body{ padding:16px 16px 18px; }
    .tag{
      display:inline-flex; align-items:center; gap:8px;
      font-size:12px; color:rgba(219,255,252,.9);
      border:1px solid rgba(0,179,166,.30);
      background:rgba(0,179,166,.08);
      padding:6px 10px;
      border-radius:999px;
      margin-bottom:10px;
    }

    /* ADN section */
    .adn{
      border-radius:24px;
      border:1px solid rgba(255,255,255,.10);
      background: linear-gradient(135deg, rgba(58,75,163,.18), rgba(14,46,71,.20));
      padding:26px;
      overflow:hidden;
      position:relative;
    }
    .adn::after{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(800px 380px at 20% 20%, rgba(107,91,255,.25), transparent 58%);
      pointer-events:none;
      mix-blend-mode:screen;
    }
    .adn ul{ margin:14px 0 0; padding-left:18px; color:var(--muted); }
    .adn li{ margin:8px 0; }

    /* form */
    .form-wrap{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:18px;
      align-items:stretch;
    }
    @media (max-width: 980px){
      .form-wrap{ grid-template-columns:1fr; }
    }

    .panel{
      border-radius:24px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      overflow:hidden;
    }
    .panel .pad{ padding:18px; }
    .dash-img{
      width:100%;
      aspect-ratio: 16/9;
      object-fit:cover;
      display:block;
      border-bottom:1px solid rgba(255,255,255,.08);
    }

    label{ display:block; font-size:13px; color:rgba(255,255,255,.82); margin:10px 0 6px; }
    input, select, textarea{
      width:100%;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.22);
      color: var(--text);
      padding:12px 12px;
      outline:none;
      transition: border-color .2s ease, box-shadow .2s ease;
      font-family: inherit;
    }
    input:focus, select:focus, textarea:focus{
      border-color: rgba(107,91,255,.45);
      box-shadow: 0 0 0 4px rgba(107,91,255,.12);
    }
    textarea{ min-height: 90px; resize: vertical; }

    .form-grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 560px){
      .form-grid{ grid-template-columns:1fr; }
    }
    .form-actions{
      display:flex; gap:12px; align-items:center; flex-wrap:wrap;
      margin-top:10px;
    }
    .note{ font-size:12px; color:rgba(255,255,255,.60); max-width:60ch; }
    .status{
      margin-top:10px;
      font-size:13px;
      color:rgba(219,255,252,.92);
      display:none;
    }
    .status.err{ color: #ffb4b4; }

    /* reveal */
    .reveal{ opacity:0; transform: translateY(14px); transition: .9s ease; }
    .reveal.on{ opacity:1; transform: translateY(0); }

    footer{
      padding:34px 0;
      border-top:1px solid rgba(255,255,255,.08);
      color:rgba(255,255,255,.65);
      background: rgba(0,0,0,.15);
    }
    .foot{
      display:flex; align-items:center; justify-content:space-between; gap:16px;
      flex-wrap:wrap;
      font-size:13px;
    }
    .foot a{ text-decoration:none; padding:8px 10px; border-radius:999px; }
    .foot a:hover{ background: rgba(255,255,255,.06); color:rgba(255,255,255,.90); }
  </style>
</head>

<body>

  <div class="nav">
    <div class="wrap nav-inner">
      <div class="brand"><span class="dot"></span> SPHAERA</div>
      <div class="nav-links">
        <a href="#problema">Techo invisible</a>
        <a href="#doctrina">Doctrina</a>
        <a href="#proceso">Proceso</a>
        <a href="#diagnostico">Diagnóstico</a>
      </div>
    </div>
  </div>

  <!-- HERO -->
  <header class="hero">
  <div class="hero-overlay"></div>

  <div class="hero-content">
    <span class="hero-badge">
      Arquitectura Empresarial Inteligente · Crecimiento Gobernado
    </span>

    <h1>
      Diseñamos la Arquitectura Inteligente
      que acelera tu crecimiento.
    </h1>

    <p>
      Transformamos operaciones manuales en sistemas estratégicos
      automatizados con IA. No perseguimos herramientas.
      Diseñamos estructura, control y evolución.
    </p>

    <div class="hero-actions">
      <a href="#diagnostico" class="btn-primary">
        Solicitar diagnóstico estratégico
      </a>

      <a href="#metodologia" class="btn-secondary">
        Explorar metodología
      </a>
    </div>
  </div>
</header>

  <!-- 2) PROBLEMA -->
  <section id="problema">
    <div class="wrap">
      <div class="section-head">
        <div>
          <h2 class="reveal">El techo invisible operativo</h2>
          <p class="sub reveal">Tu negocio no necesita más esfuerzo. Necesita estructura.</p>
        </div>
      </div>

      <div class="grid grid-4">
        <div class="card reveal"><b>Operaciones manuales ocultas</b><p>Tiempo estratégico drenado en tareas repetibles y “urgencias” diarias.</p></div>
        <div class="card reveal"><b>Dependencia del fundador</b><p>Decisiones críticas atadas a una sola persona: cuello de botella inevitable.</p></div>
        <div class="card reveal"><b>Falta de visibilidad</b><p>No hay señales claras: sin datos, la gestión se vuelve intuición.</p></div>
        <div class="card reveal"><b>Automatización sin arquitectura</b><p>Herramientas conectadas sin lógica sistémica: caos con esteroides.</p></div>
      </div>
    </div>
  </section>

  <!-- 3) DOCTRINA -->
  <section id="doctrina">
    <div class="wrap">
      <div class="section-head">
        <div>
          <h2 class="reveal">Nuestra doctrina</h2>
          <p class="sub reveal">No vendemos automatización. Vendemos <b>Arquitectura Empresarial Inteligente</b>.</p>
        </div>
      </div>

      <div class="grid grid-3">
        <div class="card reveal">
          <div class="icon-row">
            <div class="icon"><img src="assets/icons/sphaera-icon-diagnostico-512.png" alt="Icono Diagnóstico"></div>
            <div><b>Diagnóstico de Capacidad</b><p>Mapeamos fricciones, riesgos y dependencias que frenan el sistema.</p></div>
          </div>
        </div>

        <div class="card reveal">
          <div class="icon-row">
            <div class="icon"><img src="assets/icons/sphaera-icon-diseno-512.png" alt="Icono Diseño"></div>
            <div><b>Diseño Arquitectónico Estratégico</b><p>Modelamos procesos, datos y flujos que sostienen escala real.</p></div>
          </div>
        </div>

        <div class="card reveal">
          <div class="icon-row">
            <div class="icon"><img src="assets/icons/sphaera-icon-ia-512.png" alt="Icono IA"></div>
            <div><b>Implementación con IA</b><p>Orquestamos automatización y agentes bajo una lógica unificada.</p></div>
          </div>
        </div>
      </div>

      <div class="adn reveal" style="margin-top:18px;">
        <b>Nota:</b> Si ya tienes el icono de <b>Gobernanza</b>, lo integramos en esta sección como 4º pilar (recomendado).
        <br><span class="muted">Ahora mismo dejé el “Gobernanza” para el bloque ADN y para el diagnóstico (métricas/decisión).</span>
      </div>
    </div>
  </section>

  <!-- 4) PROCESO -->
  <section id="proceso">
    <div class="wrap">
      <div class="section-head">
        <div>
          <h2 class="reveal">Cómo trabajamos</h2>
          <p class="sub reveal">Fases de arquitectura: precisión primero, implementación después.</p>
        </div>
      </div>

      <div class="grid grid-4">
        <div class="card reveal"><b>FASE 01 — Mapeo estratégico</b><p>Objetivo, capacidades, riesgos y puntos de control.</p></div>
        <div class="card reveal"><b>FASE 02 — Modelado de arquitectura</b><p>Procesos, datos, integración y diseño del sistema.</p></div>
        <div class="card reveal"><b>FASE 03 — Orquestación tecnológica</b><p>Automatización + IA + stack alineado a la arquitectura.</p></div>
        <div class="card reveal"><b>FASE 04 — Optimización continua</b><p>Iteración por métricas: gobernanza y mejora sostenida.</p></div>
      </div>
    </div>
  </section>

  <!-- 5) ESCENARIOS -->
  <section id="escenarios">
    <div class="wrap">
      <div class="section-head">
        <div>
          <h2 class="reveal">Casos / escenarios</h2>
          <p class="sub reveal">Impacto sin logos al inicio: escenarios reales, micro-beneficio claro.</p>
        </div>
      </div>

      <div class="grid grid-4">
        <div class="card scenario reveal">
          <img class="thumb" src="assets/images/sphaera-sector-clinica-800x600.png" alt="Clínicas privadas">
          <div class="body">
            <div class="tag">Clínicas privadas</div>
            <b>Agenda y seguimiento sin fricción</b>
            <p>Automatización de contacto, citas y control operativo sin perder calidad.</p>
          </div>
        </div>

        <div class="card scenario reveal">
          <img class="thumb" src="assets/images/sphaera-sector-legal-800x600.png" alt="Firmas legales">
          <div class="body">
            <div class="tag">Firmas legales</div>
            <b>Trazabilidad + gobernanza</b>
            <p>Procesos y documentos con señales claras para decidir y ejecutar.</p>
          </div>
        </div>

        <div class="card scenario reveal">
          <img class="thumb" src="assets/images/sphaera-sector-realestate-800x600.png" alt="Real estate">
          <div class="body">
            <div class="tag">Real estate</div>
            <b>Gestión de leads centralizada</b>
            <p>Canales conectados a un sistema único con métricas de conversión.</p>
          </div>
        </div>

        <div class="card scenario reveal">
          <img class="thumb" src="assets/images/sphaera-sector-consultoria-800x600.png" alt="Consultoría">
          <div class="body">
            <div class="tag">Consultoría / servicios</div>
            <b>Entrega como sistema</b>
            <p>De servicios “artesanales” a una operación replicable y gobernable.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 6) ADN -->
  <section id="adn">
    <div class="wrap">
      <div class="section-head">
        <div>
          <h2 class="reveal">Tu ADN, con estructura</h2>
          <p class="sub reveal">Branding profundo: esto es lo que SPHAERA defiende, incluso cuando nadie mira.</p>
        </div>
      </div>

      <div class="adn reveal">
        <ul>
          <li><b>Diseño &gt; esfuerzo</b> — el crecimiento no se “empuja”, se diseña.</li>
          <li><b>Tecnología como sistema nervioso</b> — automatización e IA como circuito operativo.</li>
          <li><b>Datos como activo estructural</b> — si no se mide, no se gobierna.</li>
          <li><b>Evolución consciente</b> — mejora por señales, no por intuición.</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- 7) FORMULARIO (Webhook) -->
  <section id="diagnostico">
    <div class="wrap">
      <div class="section-head">
        <div>
          <h2 class="reveal">Solicita tu Diagnóstico Arquitectónico</h2>
          <p class="sub reveal">Filtramos por contexto y fricción real. Esto no es un “formulario genérico”.</p>
        </div>
      </div>

      <div class="form-wrap">
        <div class="panel reveal">
          <img class="dash-img" src="assets/images/sphaera-diagnostico-radar-dashboard-1600x900.png" alt="Diagnóstico tipo radar/dashboard">
          <div class="pad">
            <b>Qué obtienes</b>
            <p class="sub" style="margin:8px 0 0;">
              Una evaluación inicial para detectar el “techo invisible” y definir si tu operación
              necesita arquitectura, automatización, gobernanza o las tres.
            </p>
          </div>
        </div>

        <div class="panel reveal">
          <div class="pad">
            <form id="diagnosticoForm">
              <!-- IMPORTANTÍSIMO: pega aquí tu webhook de n8n -->
              <input type="hidden" id="webhookUrl" value="https://TU-DOMINIO-N8N/webhook/XXXXXXX" />

              <b>Contexto</b>
              <div class="form-grid">
                <div>
                  <label>Industria</label>
                  <input name="industria" required placeholder="Ej: Clínica / Legal / Real Estate / Servicios" />
                </div>
                <div>
                  <label>Número de empleados</label>
                  <input name="empleados" required placeholder="Ej: 5, 12, 40" />
                </div>
                <div>
                  <label>¿Usan CRM?</label>
                  <select name="crm" required>
                    <option value="" selected disabled>Selecciona…</option>
                    <option>Si</option>
                    <option>No</option>
                  </select>
                </div>
                <div>
                  <label>¿Tienen automatización activa?</label>
                  <select name="automatizacion" required>
                    <option value="" selected disabled>Selecciona…</option>
                    <option>Si</option>
                    <option>No</option>
                  </select>
                </div>
              </div>

              <b style="display:block;margin-top:6px;">Dolor estratégico</b>
              <label>¿Dónde pierdes más tiempo?</label>
              <textarea name="dolor_tiempo" required placeholder="Describe 2–3 situaciones concretas."></textarea>

              <label>¿Qué proceso depende demasiado de personas?</label>
              <textarea name="dolor_dependencia" required placeholder="Ej: seguimiento de leads, agenda, reportes, entrega…"></textarea>

              <label>¿Cuál es tu mayor fricción operativa?</label>
              <textarea name="dolor_friccion" required placeholder="Ej: falta de visibilidad, duplicación, errores, retrasos…"></textarea>

              <b style="display:block;margin-top:6px;">Contacto</b>
              <div class="form-grid">
                <div>
                  <label>Nombre</label>
                  <input name="nombre" required placeholder="Tu nombre" />
                </div>
                <div>
                  <label>Cargo</label>
                  <input name="cargo" required placeholder="Ej: CEO / Director / Gerente" />
                </div>
                <div>
                  <label>Email corporativo</label>
                  <input name="email" type="email" required placeholder="tu@empresa.com" />
                </div>
                <div>
                  <label>WhatsApp</label>
                  <input name="whatsapp" required placeholder="+593..." />
                </div>
              </div>

              <div class="form-actions">
                <button class="btn btn-primary" type="submit">Evaluar mi arquitectura</button>
                <span class="note">Enviaremos tu solicitud al sistema (webhook). Si aplica, te contactamos con próximos pasos.</span>
              </div>

              <div id="statusOk" class="status">Listo. Recibimos tu solicitud.</div>
              <div id="statusErr" class="status err">No se pudo enviar. Verifica el webhook y vuelve a intentar.</div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="wrap foot">
      <div>© <span id="y"></span> SPHAERA — Arquitectura Empresarial para la Nueva Era</div>
      <div>
        <a href="/quienes-somos.html">Quiénes somos</a>
        <a href="/privacy.html">Privacidad</a>
      </div>
    </div>
  </footer>

  <script>
    // year
    document.getElementById("y").textContent = new Date().getFullYear();

    // reveal on scroll
    const reveal = document.querySelectorAll(".reveal");
    const io = new IntersectionObserver(entries => {
      entries.forEach(e => {
        if (e.isIntersecting) e.target.classList.add("on");
      });
    }, { threshold: 0.12 });
    reveal.forEach(el => io.observe(el));

    // webhook submit
    const form = document.getElementById("diagnosticoForm");
    const ok = document.getElementById("statusOk");
    const err = document.getElementById("statusErr");

    form.addEventListener("submit", async (ev) => {
      ev.preventDefault();
      ok.style.display = "none";
      err.style.display = "none";

      const webhookUrl = document.getElementById("webhookUrl").value.trim();
      if (!webhookUrl || webhookUrl.includes("TU-DOMINIO-N8N")) {
        err.textContent = "Falta configurar el webhook URL en el HTML.";
        err.style.display = "block";
        return;
      }

      const data = Object.fromEntries(new FormData(form).entries());
      data.timestamp = new Date().toISOString();
      data.source = "sphaera-onepage";

      try {
        const res = await fetch(webhookUrl, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data),
        });

        if (!res.ok) throw new Error("HTTP " + res.status);

        ok.style.display = "block";
        form.reset();
      } catch (e) {
        err.style.display = "block";
      }
    });
  </script>
</body>
</html>
